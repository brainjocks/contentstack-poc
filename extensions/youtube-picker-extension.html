<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Contentstack Youtube Videos Field Extension</title>
  <script src="https://www.contentstack.com/sdks/contentstack-ui-extensions/dist/latest/ui-extension-sdk.js"></script>
  <link href="https://www.contentstack.com/sdks/contentstack-ui-extensions/dist/1.1.0/ui-extension-sdk.css" rel="stylesheet" type="text/css" media="all">
  <style media="all">
    #load-more-button,.button{text-decoration:none;text-align:center}#load-more-button{border-radius:0!important;font-size:14px;line-height:1.42857143;color:#25c2a3!important;width:100%!important}#close-button{width:auto;color:#fff;font-size:18px;padding:3px 4px 1px;background:#000;border-radius:50%;border:2px solid #fff;line-height:11px;box-sizing:border-box;text-align:center;font-weight:700;position:absolute;right:3px;top:5px}#close-button:hover{cursor:pointer;color:#d1d3d6}.loadspin{align-content:center!important;background:url(https://images.contentstack.io/v3/assets/bltd1343376dfba54d2/blta0b4f830d61ba527/5b58019b4f5e9b551d22f4f9/loading.gif) 40% 3px no-repeat!important;pointer-events:none}.button{border-radius:24px;font-size:14px;line-height:1.42857143;color:#25c2a3!important;width:120px}#message-container{color:#f77d7a}.loader{display:none}.wrapper{margin:0;padding:0;width:100%}#selected-video{width:100%;display:block;overflow:hidden;clear:both}#selected-video li{display:block;border:1px solid #ccc;position:relative;margin-bottom:15px}#selected-video li span.title{font-size:16px;line-height:20px;padding:10px 10px 5px;display:block;color:#748590;border-radius:32px}.wrapper .container #choose-video-section{width:100%;display:none}.wrapper .container #choose-video-section form{padding:15px 0}#choose-video-section ul li .box{border:1px solid #ccc;min-height:185px;margin-bottom:15px;cursor:pointer}#choose-video-section ul li section img{width:100%;height:100%;position:relative}#choose-video-section ul li span.title{display:-webkit-box;max-width:100%;height:41px;margin:0 auto;line-height:1;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;font-size:16px;padding:10px 10px 5px;color:#748590}.reference-loading .loader,.reference-loading .loader::after,.reference-loading .loader::before{border-radius:50%;width:1.3em;height:1.3em;-webkit-animation:load7 1.8s infinite ease-in-out;animation:load7 1.8s infinite ease-in-out}.reference-loading .loader{color:#25c2a3;font-size:10px;position:relative;text-indent:-9999em;-webkit-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0);-webkit-animation-delay:-.16s;animation-delay:-.16s;top:-20px;margin-left:6%}.reference-loading .loader::after,.reference-loading .loader::before{content:'';position:absolute;top:0}.reference-loading .loader::before{left:-2.5em;-webkit-animation-delay:-.32s;animation-delay:-.32s}.reference-loading .loader::after{left:2.5em}#choose-video-section ul li a img{width:100%;height:150px;position:relative}.reference-loading{display:inline-block;margin-left:50px;width:50%}.reference-loading .loading{text-align:center;margin:20px auto}.reference-loading .loading-flash div{border-radius:50%;height:10px;width:10px;display:inline-block;box-sizing:border-box;background:#25c2a3}.reference-loading .loading-flash div:nth-of-type(4){animation:flash .4s .5s ease-in-out infinite}.reference-loading .loading-flash div:nth-of-type(3){animation:flash .4s .2s linear infinite}.reference-loading .loading-flash div:nth-of-type(2){animation:flash .4s -.1s linear infinite}.reference-loading .loading-flash div:nth-of-type(1){animation:flash .4s -.4s linear infinite}img.thumbnail{width:100%;min-height:120px}ul#video-list{margin-top:10px}body{border:1px solid #e6eced;background-color:#f7fbfc}.container{padding:15px}
  </style>
  <style media="all">
    /*!
     * Bootstrap v3.3.7 (http://getbootstrap.com)
     * Copyright 2011-2018 Twitter,
      Inc.
     * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
     *//*!
     * Generated using the Bootstrap Customizer (<none>)
     * Config saved to config.json and <none>
     *//*!
     * Bootstrap v3.3.7 (http://getbootstrap.com)
     * Copyright 2011-2016 Twitter,
      Inc.
     * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
     *//*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */.container,.container-fluid{margin-right:auto;margin-left:auto;padding-left:15px;padding-right:15px}@media (min-width:768px){.container{width:750px}}@media (min-width:992px){.container{width:970px}}@media (min-width:1200px){.container{width:1170px}}.row{margin-left:-15px;margin-right:-15px}.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-sm-1,.col-sm-10,.col-sm-11,.col-sm-12,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-xs-1,.col-xs-10,.col-xs-11,.col-xs-12,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9{position:relative;min-height:1px;padding-left:15px;padding-right:15px}.col-xs-1,.col-xs-10,.col-xs-11,.col-xs-12,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9{float:left}.col-xs-12{width:100%}.col-xs-11{width:91.66666667%}.col-xs-10{width:83.33333333%}.col-xs-9{width:75%}.col-xs-8{width:66.66666667%}.col-xs-7{width:58.33333333%}.col-xs-6{width:50%}.col-xs-5{width:41.66666667%}.col-xs-4{width:33.33333333%}.col-xs-3{width:25%}.col-xs-2{width:16.66666667%}.col-xs-1{width:8.33333333%}.col-xs-pull-12{right:100%}.col-xs-pull-11{right:91.66666667%}.col-xs-pull-10{right:83.33333333%}.col-xs-pull-9{right:75%}.col-xs-pull-8{right:66.66666667%}.col-xs-pull-7{right:58.33333333%}.col-xs-pull-6{right:50%}.col-xs-pull-5{right:41.66666667%}.col-xs-pull-4{right:33.33333333%}.col-xs-pull-3{right:25%}.col-xs-pull-2{right:16.66666667%}.col-xs-pull-1{right:8.33333333%}.col-xs-pull-0{right:auto}.col-xs-push-12{left:100%}.col-xs-push-11{left:91.66666667%}.col-xs-push-10{left:83.33333333%}.col-xs-push-9{left:75%}.col-xs-push-8{left:66.66666667%}.col-xs-push-7{left:58.33333333%}.col-xs-push-6{left:50%}.col-xs-push-5{left:41.66666667%}.col-xs-push-4{left:33.33333333%}.col-xs-push-3{left:25%}.col-xs-push-2{left:16.66666667%}.col-xs-push-1{left:8.33333333%}.col-xs-push-0{left:auto}.col-xs-offset-12{margin-left:100%}.col-xs-offset-11{margin-left:91.66666667%}.col-xs-offset-10{margin-left:83.33333333%}.col-xs-offset-9{margin-left:75%}.col-xs-offset-8{margin-left:66.66666667%}.col-xs-offset-7{margin-left:58.33333333%}.col-xs-offset-6{margin-left:50%}.col-xs-offset-5{margin-left:41.66666667%}.col-xs-offset-4{margin-left:33.33333333%}.col-xs-offset-3{margin-left:25%}.col-xs-offset-2{margin-left:16.66666667%}.col-xs-offset-1{margin-left:8.33333333%}.col-xs-offset-0{margin-left:0}@media (min-width:768px){.col-sm-1,.col-sm-10,.col-sm-11,.col-sm-12,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9{float:left}.col-sm-12{width:100%}.col-sm-11{width:91.66666667%}.col-sm-10{width:83.33333333%}.col-sm-9{width:75%}.col-sm-8{width:66.66666667%}.col-sm-7{width:58.33333333%}.col-sm-6{width:50%}.col-sm-5{width:41.66666667%}.col-sm-4{width:33.33333333%}.col-sm-3{width:25%}.col-sm-2{width:16.66666667%}.col-sm-1{width:8.33333333%}.col-sm-pull-12{right:100%}.col-sm-pull-11{right:91.66666667%}.col-sm-pull-10{right:83.33333333%}.col-sm-pull-9{right:75%}.col-sm-pull-8{right:66.66666667%}.col-sm-pull-7{right:58.33333333%}.col-sm-pull-6{right:50%}.col-sm-pull-5{right:41.66666667%}.col-sm-pull-4{right:33.33333333%}.col-sm-pull-3{right:25%}.col-sm-pull-2{right:16.66666667%}.col-sm-pull-1{right:8.33333333%}.col-sm-pull-0{right:auto}.col-sm-push-12{left:100%}.col-sm-push-11{left:91.66666667%}.col-sm-push-10{left:83.33333333%}.col-sm-push-9{left:75%}.col-sm-push-8{left:66.66666667%}.col-sm-push-7{left:58.33333333%}.col-sm-push-6{left:50%}.col-sm-push-5{left:41.66666667%}.col-sm-push-4{left:33.33333333%}.col-sm-push-3{left:25%}.col-sm-push-2{left:16.66666667%}.col-sm-push-1{left:8.33333333%}.col-sm-push-0{left:auto}.col-sm-offset-12{margin-left:100%}.col-sm-offset-11{margin-left:91.66666667%}.col-sm-offset-10{margin-left:83.33333333%}.col-sm-offset-9{margin-left:75%}.col-sm-offset-8{margin-left:66.66666667%}.col-sm-offset-7{margin-left:58.33333333%}.col-sm-offset-6{margin-left:50%}.col-sm-offset-5{margin-left:41.66666667%}.col-sm-offset-4{margin-left:33.33333333%}.col-sm-offset-3{margin-left:25%}.col-sm-offset-2{margin-left:16.66666667%}.col-sm-offset-1{margin-left:8.33333333%}.col-sm-offset-0{margin-left:0}}@media (min-width:992px){.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{float:left}.col-md-12{width:100%}.col-md-11{width:91.66666667%}.col-md-10{width:83.33333333%}.col-md-9{width:75%}.col-md-8{width:66.66666667%}.col-md-7{width:58.33333333%}.col-md-6{width:50%}.col-md-5{width:41.66666667%}.col-md-4{width:33.33333333%}.col-md-3{width:25%}.col-md-2{width:16.66666667%}.col-md-1{width:8.33333333%}.col-md-pull-12{right:100%}.col-md-pull-11{right:91.66666667%}.col-md-pull-10{right:83.33333333%}.col-md-pull-9{right:75%}.col-md-pull-8{right:66.66666667%}.col-md-pull-7{right:58.33333333%}.col-md-pull-6{right:50%}.col-md-pull-5{right:41.66666667%}.col-md-pull-4{right:33.33333333%}.col-md-pull-3{right:25%}.col-md-pull-2{right:16.66666667%}.col-md-pull-1{right:8.33333333%}.col-md-pull-0{right:auto}.col-md-push-12{left:100%}.col-md-push-11{left:91.66666667%}.col-md-push-10{left:83.33333333%}.col-md-push-9{left:75%}.col-md-push-8{left:66.66666667%}.col-md-push-7{left:58.33333333%}.col-md-push-6{left:50%}.col-md-push-5{left:41.66666667%}.col-md-push-4{left:33.33333333%}.col-md-push-3{left:25%}.col-md-push-2{left:16.66666667%}.col-md-push-1{left:8.33333333%}.col-md-push-0{left:auto}.col-md-offset-12{margin-left:100%}.col-md-offset-11{margin-left:91.66666667%}.col-md-offset-10{margin-left:83.33333333%}.col-md-offset-9{margin-left:75%}.col-md-offset-8{margin-left:66.66666667%}.col-md-offset-7{margin-left:58.33333333%}.col-md-offset-6{margin-left:50%}.col-md-offset-5{margin-left:41.66666667%}.col-md-offset-4{margin-left:33.33333333%}.col-md-offset-3{margin-left:25%}.col-md-offset-2{margin-left:16.66666667%}.col-md-offset-1{margin-left:8.33333333%}.col-md-offset-0{margin-left:0}}@media (min-width:1200px){.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9{float:left}.col-lg-12{width:100%}.col-lg-11{width:91.66666667%}.col-lg-10{width:83.33333333%}.col-lg-9{width:75%}.col-lg-8{width:66.66666667%}.col-lg-7{width:58.33333333%}.col-lg-6{width:50%}.col-lg-5{width:41.66666667%}.col-lg-4{width:33.33333333%}.col-lg-3{width:25%}.col-lg-2{width:16.66666667%}.col-lg-1{width:8.33333333%}.col-lg-pull-12{right:100%}.col-lg-pull-11{right:91.66666667%}.col-lg-pull-10{right:83.33333333%}.col-lg-pull-9{right:75%}.col-lg-pull-8{right:66.66666667%}.col-lg-pull-7{right:58.33333333%}.col-lg-pull-6{right:50%}.col-lg-pull-5{right:41.66666667%}.col-lg-pull-4{right:33.33333333%}.col-lg-pull-3{right:25%}.col-lg-pull-2{right:16.66666667%}.col-lg-pull-1{right:8.33333333%}.col-lg-pull-0{right:auto}.col-lg-push-12{left:100%}.col-lg-push-11{left:91.66666667%}.col-lg-push-10{left:83.33333333%}.col-lg-push-9{left:75%}.col-lg-push-8{left:66.66666667%}.col-lg-push-7{left:58.33333333%}.col-lg-push-6{left:50%}.col-lg-push-5{left:41.66666667%}.col-lg-push-4{left:33.33333333%}.col-lg-push-3{left:25%}.col-lg-push-2{left:16.66666667%}.col-lg-push-1{left:8.33333333%}.col-lg-push-0{left:auto}.col-lg-offset-12{margin-left:100%}.col-lg-offset-11{margin-left:91.66666667%}.col-lg-offset-10{margin-left:83.33333333%}.col-lg-offset-9{margin-left:75%}.col-lg-offset-8{margin-left:66.66666667%}.col-lg-offset-7{margin-left:58.33333333%}.col-lg-offset-6{margin-left:50%}.col-lg-offset-5{margin-left:41.66666667%}.col-lg-offset-4{margin-left:33.33333333%}.col-lg-offset-3{margin-left:25%}.col-lg-offset-2{margin-left:16.66666667%}.col-lg-offset-1{margin-left:8.33333333%}.col-lg-offset-0{margin-left:0}}
  </style>
  <script src="https://code.jquery.com/jquery-1.11.1.min.js" integrity="sha256-VAvG3sHdS5LqTT+5A/aeq/bZGa/Uj04xKxY8KM/w9EE=" crossorigin="anonymous"></script>
</head>

<body>
<div class="wrapper">
  <div class="container">
    <div class="discription_box">
      <div id="selected-video" class="row">
      </div>
      <button style="display: none" id="choose-button" class="btn cs-btn-primary button">Choose Video</button>
      <button id="hide-button" style="display: none" class="btn cs-btn-primary button">Hide Videos</button>
      <div class="reference-loading">
        <div class="loading-flash">
          <div></div>
          <div></div>
          <div></div>
          <div></div>
        </div>
      </div>
    </div>
    <!-- list section start  here -->
    <div id="choose-video-section">
      <form>
        <input type="search" id="search-input" class="cs-text-box w-100" placeholder="Search...">
      </form>
      <div id="message-container" class="invalid"> No Videos Found</div>
      <ul id="video-list" class="row">
      </ul>
      <button id="load-more-button" style="display: none" onclick="loadMore()" class="btn cs-btn-primary">Load More</button>
    </div>
    <!-- list section ends  here -->
  </div>
</div>
<script>
  "use strict";var _createClass=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var extensionField=void 0,loader=void 0,videoList=void 0,messageContainer=void 0,youtube=void 0,nextPageToken=void 0,previousQuery=void 0,loadMoreButton=void 0,searchInput=void 0,hideButton=void 0,chooseButton=void 0,videoListSection=void 0,initialResponse=void 0,currentVideoList=[],Youtube=function(){function n(e){var t=e.api_key,i=e.channel_id;_classCallCheck(this,n),this.apiKey=t,this.channelId=i}return _createClass(n,[{key:"getVideos",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,o=this,s=void 0;return new Promise(function(t,i){fetch("https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults="+n+"&key="+o.apiKey+"&type=video"+(e?"&q="+e:"&order=date")+"&pageToken="+(nextPageToken||""),{method:"GET"}).then(function(e){return s=e.status,e.json()}).then(function(e){if(200===s)return t(e);throw Error("Failed to fetch videos from Youtube")}).catch(function(e){i(e)})})}}]),n}();function displayMessage(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"No videos found";messageContainer.text(e),videoListSection.show(),messageContainer.show(),loader.hide()}function close(){hideButton.hide(),chooseButton.show(),videoListSection.hide()}function deselectVideo(){$("#selected-video").html(" "),extensionField.field.setData(null)}function selectVideo(e){var t='<div class="col-xs-6 col-sm-4 col-md-3" title="'+e.title+'"><li>\n                              <div class="img-wrapper">\n                                  <img class="thumbnail"  src="'+e.thumbnails.medium.url+'">\n                              </div>\n                              <span class="title truncate">'+e.title+'</span>\n                              <span title="Remove video" onclick="deselectVideo()" id="close-button">×</span>\n                          </li></div>';$("#selected-video").html(t)}function domChangeListner(){$("#video-list li").click(function(t){var e=currentVideoList.find(function(e){return e.id.videoId===t.currentTarget.id}),i=e.snippet;i.videoId=e.id.videoId,extensionField.field.setData(i).then(function(){selectVideo(i),close()})})}function render(e){var t,i=e.items,n=void 0===i?[]:i,o=e.nextPageToken;if(0===n.length)return loader.hide(),videoList.empty(),void displayMessage();(t=currentVideoList).push.apply(t,_toConsumableArray(n)),(nextPageToken=o)?loadMoreButton.show():loadMoreButton.hide(),loader.hide(),messageContainer.hide();for(var s=0;s<n.length;s+=1)videoList.append('<li class="col-xs-6 col-sm-4 col-md-3" title="'+n[s].snippet.title+'"  id="'+n[s].id.videoId+'">\n                              <div class="box">\n                              <div class="img-wrapper">\n                                <img class="thumbnail" src="'+n[s].snippet.thumbnails.medium.url+'" alt="image-6">\n                              </div>\n                              <span class="title truncate">'+n[s].snippet.title+"</span>\n                              </div>\n                          </li>");domChangeListner()}function loadMore(){loadMoreButton.addClass("loadspin"),youtube.getVideos(previousQuery).then(function(e){loadMoreButton.removeClass("loadspin"),render(e)})}function reset(){return previousQuery="",videoList.empty(),currentVideoList=[],searchInput.val(""),render(initialResponse)}function intializeVideoList(){messageContainer=$("#message-container"),loader=$(".reference-loading"),videoList=$("#video-list"),videoListSection=$("#choose-video-section"),(youtube=new Youtube(extensionField.config)).getVideos().then(function(e){render(initialResponse=e),chooseButton.show()}).catch(displayMessage.bind(null,"Error in fetching videos from Youtube"))}function initialzieSearchField(){searchInput.on("keypress",function(e){var t=searchInput.val().toLowerCase();if(13===e.keyCode){if(e.preventDefault(),t===previousQuery)return;loader.show(),loadMoreButton.hide(),videoList.empty(),nextPageToken="",youtube.getVideos(t).then(function(e){previousQuery=t,render(e)})}}),searchInput.blur(function(){0===searchInput.val().length&&previousQuery&&reset()})}function initalizeButtons(){loadMoreButton=$("#load-more-button"),searchInput=$("#search-input"),hideButton=$("#hide-button"),(chooseButton=$("#choose-button")).click(function(){hideButton.show(),chooseButton.hide(),videoListSection.show(),reset()}),hideButton.click(close)}$(document).ready(function(){ContentstackUIExtension.init().then(function(e){(extensionField=e).window.enableAutoResizing();var t=extensionField.field.getData();t&&!$.isEmptyObject(t)&&selectVideo(t),intializeVideoList(),initalizeButtons(),initialzieSearchField()})});
</script>
</body>

</html>